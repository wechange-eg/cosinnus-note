{% extends "cosinnus/widgets/fadedown_base_widget.html" %}
{% load i18n cosinnus_tags widget_tweaks %}

{% block fadedown_class %}{% endblock %}
{% block headline_properties %}data-toggle="modal" data-target="#write-news-modal"{% endblock %}


{% block fadedown_content %}
    {# sadly we have no practical way of a block to extend for this #}
    {% include 'cosinnus/common/simplemde_dependencies.html' with element_id=form.forms.obj.text.id_for_label %}
    
	{% captureas label %}
        {% if user|can_create_objects_in:group %}
            {{ form.forms.obj.non_field_errors }}
            
            {# Regular Field #}
			{% trans "Title (optional)" as title_placeholder %}
			{% include 'cosinnus/fields/default_field.html' with field=form.forms.obj.title placeholder=title_placeholder %}
			
			{# Large Field #}
			{% trans "Please enter a message..." as text_placeholder %}
			{% include 'cosinnus/fields/default_field.html' with field=form.forms.obj.text placeholder=text_placeholder large_field=True %}

            {% if SETTINGS.COSINNUS_FACEBOOK_INTEGRATION_ENABLED %}
                {% include 'cosinnus/utils/facebook_integration.html' %}
            {% endif %}
                
            {% include 'cosinnus/media_tags.html' with do_include_facebook_button=1 %}
        {% else %}
            <div>
                <p>
                    {% trans "To post in this team you need to" %}
                    <a href="#" data-toggle="modal" data-target="#join_withdraw_modal">
                        <i class="fa fa-sign-out"></i>
                        <span>{% trans "request to join" %}</span></a>!
                </p>
            </div>
        {% endif %}
	{% endcaptureas %}
	
	
	{% captureas title %}{% trans "Write a news post" %}{% endcaptureas %}
	{% trans "Cancel" as cancel_button_label %}
	{% captureas submit_button_label %}{% trans "Post" %}{% endcaptureas %}
	{% captureas action %}{% group_url 'cosinnus:note:add' group=group %}{% endcaptureas %}
	{% include "cosinnus/modal_box.html" with id="write-news-modal" label=label form_action=action title=title title_icon="fa-write" %}
        
{% endblock fadedown_content %}
